

<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Agrowfarm - Agriculture Category Bootstrap Responsive Template | Contact :: W3layouts </title>
    <!-- google fonts -->
    <link href="//fonts.googleapis.com/css2?family=Nunito:ital,wght@0,400;0,600;0,700;0,800;1,400&display=swap" rel="stylesheet">
    <!-- Template CSS -->
    <link rel="stylesheet" href="../static/assets/css/style-starter.css">

    <style>
        table,td,th
        {
        border:1px solid black;
        border-collapse:collapse;
        }
    </style>

     <style>
	   .main{
	  display:flex;
	  flex-wrap:wrap;
	  column-gap:50px;
	  row-gap:20px;
	  }
	  .main2{
	  display:flex;
	  flex-direction:column;
	  flex-wrap:wrap;
	  width:300px;
	  height:520px;
	  row-gap:5px;
	  padding:20px;
	  box-shadow:2px 2px  10px 2px lightgray;
	  margin-left:20px;
	  box-sizzing:border-box;
	  border-top-left-radius:10px;
	  border-top-right-radius:10px;
	  }

	  .price{


	  color:#FFFFFF;
	  font-weight:800;
	   background:#02924e;
	  border-radius:5px;
	  width:100%;
	  text-align:center;padding:5px;
	 }
	 .main2 img{

	 height:200px;
	 }
	  .add{
	   padding:10px;
	  background:#02924e;
	  color:#FFFFFF;

	  font-weight:800;
	align-items:flex-end;
	  border-radius:5px;
	    width:90px;
	  text-align:center;
	  margin-left:150px;
	  margin-top:30px;
	  }
	  .add a{
	  text-decoration:none;
	  color:#FFF;
	   width:80%;
	  }
	  </style>
</head>

<body>
    <!--/Header-->
    <header id="site-header" class="fixed-top">
        <div class="container">
            <nav class="navbar navbar-expand-lg navbar-light stroke">
                <h1><a class="navbar-brand" href="index.html">
                        Apple Leaf  Disease <span class="sub-color"> Detection</span>
                    </a></h1>
                <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon fa icon-expand fa-bars"></span>
                    <span class="navbar-toggler-icon fa icon-close fa-times"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarScroll">
                    <ul class="navbar-nav mx-lg-auto my-2 my-lg-0 navbar-nav-scroll">
                         {% include 'Menu/Farmer.html'  %}
                    </ul>

                </div>
                <!-- toggle switch for light and dark theme -->
                <div class="mobile-position">
                    <nav class="navigation">
                        <div class="theme-switch-wrapper">
                            <label class="theme-switch" for="checkbox">
                                <input type="checkbox" id="checkbox">
                                <div class="mode-container">
                                    <i class="gg-sun"></i>
                                    <i class="gg-moon"></i>
                                </div>
                            </label>
                        </div>
                    </nav>
                </div>
                <!-- //toggle switch for light and dark theme -->
            </nav>
        </div>
    </header>
    <!--//Header-->
    <!--/inner-page-->
    <div class="inner-banner py-5">
        <section class="w3l-breadcrumb text-left py-sm-5 ">
            <div class="container">
                <div class="w3breadcrumb-gids">
                    <div class="w3breadcrumb-left text-left">
                        <h2 class="inner-w3-title">
                            User </h2>

                    </div>
                    <div class="w3breadcrumb-right">


                        </ul>
                    </div>
                </div>

            </div>
        </section>
    </div>
    <!--//inner-page-->
    <!-- contact-form -->

	{% with messages = get_flashed_messages() %}
  {% if messages %}
    <script>
      var messages = {{ messages | safe }};
      for (var i=0; i<messages.length; i++) {
        alert(messages[i]);
      }
    </script>
  {% endif %}
{% endwith %}




                    <!-- Center content vertically and horizontally -->
<!-- Center content vertically and horizontally -->
<!-- Center content vertically and horizontally -->
<!-- Center content vertically and horizontally -->
<!-- Center content vertically and horizontally -->
<div style="display: flex; justify-content: center; align-items: center; min-height: 100vh;">
    <form action="/pred" enctype="multipart/form-data" method="post">
        <div style="text-align: center; max-width: 400px; width: 100%;">
            <h3><strong>Upload Diseased Leaf Image</strong></h3>
            <input type="file" name="file" required class="form-control my-3">

            <!-- Soil Health Card Inputs -->
            <h5><strong>Soil Health Information</strong></h5>

            <!-- pH Range -->
            <select name="soil_ph" id="soil_ph" class="form-control my-2" required>
                <option value="">Select Soil pH Range</option>
                <option value="Below 5.5 (Strongly Acidic)">Below 5.5 (Strongly Acidic)</option>
                <option value="5.5 - 6.5 (Moderately Acidic)">5.5 - 6.5 (Moderately Acidic)</option>
                <option value="6.5 - 7.5 (Neutral)">6.5 - 7.5 (Neutral)</option>
                <option value="7.5 - 8.5 (Slightly Alkaline)">7.5 - 8.5 (Slightly Alkaline)</option>
                <option value="Above 8.5 (Strongly Alkaline)">Above 8.5 (Strongly Alkaline)</option>
            </select>

            <!-- NPK Levels -->
            <select name="soil_npk" id="soil_npk" class="form-control my-2" required>
                <option value="">Select NPK Level</option>
                <option value="Low N (0-280), P (0-10), K (0-110)">Low: N (0–280), P (0–10), K (0–110)</option>
                <option value="Medium N (281-560), P (11-25), K (111-280)">Medium: N (281–560), P (11–25), K (111–280)</option>
                <option value="High N (561+), P (26+), K (281+)">High: N (561+), P (26+), K (281+)</option>
            </select>

            <!-- Auto Soil Data Button -->
            <button type="button" onclick="getSoilData()" class="btn btn-success btn-style mb-3">Get Soil Data by Location</button>

            <!-- Location Inputs (Manual or Auto) -->
            <h5><strong>Location (For Weather Data)</strong></h5>
            <input type="text" name="latitude" id="latitude" class="form-control my-2" placeholder="Latitude (e.g. 11.12345)" required>
            <input type="text" name="longitude" id="longitude" class="form-control my-2" placeholder="Longitude (e.g. 77.12345)" required>

            <button type="button" onclick="getLocation()" class="btn btn-success btn-style mb-3">Get Current Location</button>

            <!-- Action Buttons -->
            <div class="mt-4">
                <button type="submit" class="btn btn-success btn-style mt-3">Detect Disease</button>
                <button type="reset" class="btn btn-success btn-style mt-3">Reset</button>
            </div>
        </div>
    </form>
</div>

<!-- JavaScript to get current location -->
<script>
    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                document.getElementById('latitude').value = position.coords.latitude.toFixed(5);
                document.getElementById('longitude').value = position.coords.longitude.toFixed(5);
            }, function(error) {
                alert("Unable to access location. Please enter manually.");
            });
        } else {
            alert("Geolocation not supported by your browser.");
        }
    }

    function getSoilData() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;

                // Fill lat/lon inputs for consistency
                document.getElementById('latitude').value = lat.toFixed(5);
                document.getElementById('longitude').value = lon.toFixed(5);

                fetch('/get_soil_data', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ latitude: lat, longitude: lon })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.soil_ph && data.soil_npk) {
                        document.getElementById('soil_ph').value = data.soil_ph;
                        document.getElementById('soil_npk').value = data.soil_npk;
                    } else {
                        alert("Soil data not available for this location.");
                    }
                })
                .catch(err => {
                    console.error(err);
                    alert("Failed to fetch soil data.");
                });
            }, function(error) {
                alert("Unable to access location. Please enter manually.");
            });
        } else {
            alert("Geolocation not supported by your browser.");
        }
    }
</script>


















                 </div>
                </div>
            </div>
        </div>
    </section>


    <!-- //contact-form -->

    <!--//contact-->
    <!--/footer-->
   <footer class="w3l-footer-29-main">
        <div class="footer-29-w3l py-5">
            <div class="container pt-md-5">

                <div class="w3l-copyright text-center mt-lg-5 mt-sm-4 pt-md-4 pt-3">
                    <p class="copy-footer-29">©Apple  Leaf . All rights reserved. Design by <a href="#" target="_blank">
                            Student</a></p>
                </div>
            </div>
        </div>
    </footer>
    <!-- //footer -->

    <!-- Js scripts -->
    <!-- move top -->
    <button onclick="topFunction()" id="movetop" title="Go to top">
        <span class="fas fa-long-arrow-alt-up" aria-hidden="true"></span>
    </button>
    <script>
        // When the user scrolls down 20px from the top of the document, show the button
        window.onscroll = function() {
            scrollFunction()
        };

        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                document.getElementById("movetop").style.display = "block";
            } else {
                document.getElementById("movetop").style.display = "none";
            }
        }

        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }

    </script>


    <!-- //move top -->

    <!-- Template JavaScript -->
    <script src="../static/assets/js/jquery-3.3.1.min.js"></script>
    <script src="../static/assets/js/theme-change.js"></script>
    <!--/slider-js-->
    <!-- MENU-JS -->
    <script>
        $(window).on("scroll", function() {
            var scroll = $(window).scrollTop();

            if (scroll >= 80) {
                $("#site-header").addClass("nav-fixed");
            } else {
                $("#site-header").removeClass("nav-fixed");
            }
        });

        //Main navigation Active Class Add Remove
        $(".navbar-toggler").on("click", function() {
            $("header").toggleClass("active");
        });
        $(document).on("ready", function() {
            if ($(window).width() > 991) {
                $("header").removeClass("active");
            }
            $(window).on("resize", function() {
                if ($(window).width() > 991) {
                    $("header").removeClass("active");
                }
            });
        });

    </script>
    <!-- //MENU-JS -->

    <!-- disable body scroll which navbar is in active -->
    <script>
        $(function() {
            $('.navbar-toggler').click(function() {
                $('body').toggleClass('noscroll');
            })
        });

    </script>
    <!-- //disable body scroll which navbar is in active -->
    <!-- //bootstrap -->
    <script src="../static/assets/js/bootstrap.min.js"></script>

</body>

</html>
